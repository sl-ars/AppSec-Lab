{% extends 'base.html' %}
{% block content %}
<h3>{{ 'Edit Note' if note else 'Create Note' }}</h3>

<form method="post" enctype="multipart/form-data">
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input class="form-control" name="title" value="{{ note.title if note else '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Content</label>
    <textarea class="form-control" name="content" rows="6" required>{{ note.content if note else '' }}</textarea>
  </div>

  {% if note %}
    <hr>
    <h5>Existing attachments</h5>
    {% if attachments %}
      <ul>
        {% for a in attachments %}
          <li>
            <a href="/note/{{note.id}}/file/{{a.id}}">{{ a.original_name }}</a>
            <small class="text-muted">({{ a.mime_type or 'file' }}, {{ a.size }} bytes)</small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="text-muted">No files yet.</p>
    {% endif %}
  {% endif %}

  <div class="mb-3">
    <label class="form-label">Add attachment(s)</label>
    <input class="form-control" type="file" name="files" accept=".pdf,.jpg,.jpeg,.png" multiple>
    <div class="form-text">You can select multiple files. Allowed: .pdf, .jpg, .jpeg, .png</div>
  </div>

  <button class="btn btn-primary">Save</button>
  <a href="/notes" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
